<nav class="sidebar">
	<!-- Logo Section -->
	<div class="sidebar-header">
		<p-button
			icon="pi pi-th-large"
			[text]="true"
			class="logo-button"
			[routerLink]="['/home']"
			[pTooltip]="(settings$ | async)?.name || 'Home'"
			tooltipPosition="right"
		>
		</p-button>
	</div>

	<!-- Navigation Items -->
	<div class="sidebar-nav">
		<ng-container *ngFor="let item of sidebarService.navigationItems()">
			<p-button
				[icon]="'pi pi-' + item.icon"
				[text]="true"
				class="nav-item"
				[class.active]="item.route && isActiveRoute(item.route)"
				(onClick)="handleItemClick(item)"
				[pTooltip]="item.label"
				tooltipPosition="right"
			>
				<span
					class="item-badge"
					*ngIf="item.badge"
					[ngClass]="'badge-' + (item.badgeColor || 'primary')"
				>
					{{ item.badge }}
				</span>
			</p-button>

			<p-divider
				*ngIf="item.dividerAfter"
				class="nav-divider"
			></p-divider>
		</ng-container>
	</div>

	<!-- User Section at Bottom -->
	<div class="sidebar-footer">
		<!-- Theme Toggle -->
		<!-- <p-button
      [icon]="themeService.isDarkMode() ? 'pi pi-sun' : 'pi pi-moon'"
      [text]="true"
      class="theme-toggle"
      (onClick)="themeService.toggleTheme()"
      [pTooltip]="'Switch to ' + (themeService.isDarkMode() ? 'light' : 'dark') + ' mode'"
      tooltipPosition="right">
    </p-button> -->

		<!-- User Menu -->
		<div class="user-section" *ngIf="user$ | async as user">
			<p-button
				[text]="true"
				(onClick)="userMenu.toggle($event)"
				[pTooltip]="user.email"
				tooltipPosition="right"
			>
				{{ getUserInitial(user) }}
			</p-button>

			<p-menu #userMenu [model]="userMenuItems" [popup]="true">
				<ng-template pTemplate="start">
					<div class="user-menu-header">
						<div class="user-avatar-large">
							{{ getUserInitial(user) }}
						</div>
						<div class="user-details">
							<div class="user-email">{{ user.email }}</div>
							<div
								class="app-name"
								*ngIf="settings$ | async as settings"
							>
								{{ settings.name }}
							</div>
						</div>
					</div>
					<p-divider></p-divider>
				</ng-template>
			</p-menu>
		</div>
	</div>
</nav>
